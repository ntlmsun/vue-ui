/* Automatically generated by './build/bin/build-entry.js' */

import Layout from '../packages/layout/index.js';
import SelectTableDrag from '../packages/select-table-drag/index.js';
import ReuseTab from '../packages/reuse-tab/index.js';
import Scrollbar from '../packages/scrollbar/index.js';
import oAxiosInterceptor from '../shared/utils/axios/axios.js';
import { Startup } from '../shared/utils/axios/startup.js';
import mStore from '../shared/utils/store/index.js';
import Http from '../shared/utils/http/index.js';
import Convert from '../shared/utils/convert/index.js';
import Cookie from '../shared/utils/cookie/index.js';
import Permission from '../shared/utils/permission/permission.js';
import ElementUI from 'element-ui';
import '../packages/icons/components';
import SvgIcon from 'vue-svgicon';
import Router from 'vue-router';
import * as directives from '../shared/directives';

const components = [
  Layout,
  ReuseTab,
  Scrollbar
];

const install = function(Vue) {

  components.forEach(component => {
    Vue.component(component.name, component);
  });

  Object.keys(directives).forEach(key => {
    Vue.directive(key, directives[key])
  })

  Vue.use(SelectTableDrag);

  Vue.use(ElementUI, {
    size: mStore.state.App.size
  })

  Vue.use(SvgIcon, {
    tagName: 'svg-icon',
    defaultWidth: '1em',
    defaultHeight: '1em'
  });

  Vue.use(Router);

  Vue.prototype.$convert = Convert;
  Vue.prototype.$http = Http;
  Vue.prototype.$cookie = Cookie;
  Vue.prototype.$mStore = mStore;

  oAxiosInterceptor.init();

  Startup.bootstrap();
}

/* istanbul ignore if */
if (typeof window !== 'undefined' && window.Vue) {
  install(window.Vue);
}

export default {
  version: '0.1.2-beta.0.8',
  install,
  Http,
  Convert,
  Cookie,
  mStore,
  Permission,
  Layout,
  SelectTableDrag,
  ReuseTab,
  Scrollbar
};
